# مرحبًا بك في Frucio POS

هذا المشروع هو تطبيق نقاط بيع (POS) متكامل، تم بناؤه باستخدام Next.js و React و Tailwind CSS. تم تصميمه ليكون سريعًا وسهل الاستخدام وقابلاً للتخصيص.

## المتطلبات الأساسية

قبل البدء، تأكد من أن لديك [Node.js](https://nodejs.org/) (الإصدار 20 أو أحدث) و npm مثبتين على حاسوبك.

## كيفية تشغيل البرنامج على حاسوبك

اتبع هذه الخطوات لتشغيل التطبيق محليًا على جهازك:

1.  **تحميل الكود:**
    إذا قمت بربط المشروع بـ GitHub، قم باستنساخ (clone) المستودع إلى جهازك. وإلا، قم بتنزيل ملفات المشروع.

2.  **تثبيت الاعتماديات:**
    افتح الطرفية (Terminal) في مجلد المشروع وقم بتشغيل الأمر التالي لتثبيت جميع الحزم المطلوبة:
    ```bash
    npm install
    ```

3.  **تشغيل خادم التطوير:**
    بعد اكتمال التثبيت، قم بتشغيل الأمر التالي لبدء تشغيل التطبيق في وضع التطوير:
    ```bash
    npm run dev
    ```

4.  **فتح التطبيق:**
    سيتم تشغيل التطبيق الآن. افتح متصفح الويب الخاص بك وانتقل إلى العنوان التالي:
    [http://localhost:9002](http://localhost:9002)

## الأوامر المتاحة

-   `npm run dev`: لتشغيل التطبيق في وضع التطوير مع ميزة التحديث التلقائي.
-   `npm run build`: لبناء نسخة الإنتاج من التطبيق.
-   `npm run start`: لتشغيل نسخة الإنتاج التي تم بناؤها.
-   `npm run lint`: لفحص الكود وتحديد الأخطاء المحتملة.

---

### **وصف تفصيلي للمشروع (Prompt)**

هذا المستند يقدم وصفًا تفصيليًا لتطبيق "Frucio POS"، وهو نظام نقاط بيع (POS) متكامل مصمم للشركات الصغيرة. يمكن استخدام هذا الوصف كـ "prompt" لتوجيه أنظمة الذكاء الاصطناعي لفهم المشروع، أو تعديله، أو إضافة ميزات جديدة إليه.

#### **1. نظرة عامة على المشروع**

*   **اسم المشروع:** Frucio POS
*   **الهدف الأساسي:** توفير نظام نقاط بيع شامل، سهل الاستخدام، وسريع، يعمل محليًا على حاسوب المستخدم لإدارة المبيعات، المخزون، العملاء، والموردين.
*   **الجمهور المستهدف:** المتاجر الصغيرة، المقاهي، المخابز، وأي نشاط تجاري يحتاج إلى نظام بسيط لإدارة عملياته اليومية.

#### **2. التقنيات المستخدمة (Tech Stack)**

*   **إطار العمل (Framework):** Next.js (مع App Router)
*   **مكتبة الواجهة الأمامية (UI Library):** React
*   **لغة البرمجة:** TypeScript
*   **التصميم والواجهة:** Tailwind CSS
*   **مكونات الواجهة (UI Components):** ShadCN UI (مكتبة مكونات مبنية فوق Tailwind CSS و Radix UI)
*   **إدارة البيانات:** ملفات JSON محلية مشفرة. تتم جميع عمليات القراءة والكتابة عبر "Server Actions" في Next.js.
*   **الرسوم البيانية:** Recharts

#### **3. الميزات والوظائف الأساسية**

**أ. واجهة نقاط البيع (POS Interface - `/`)**
*   واجهة رئيسية لتسجيل المبيعات بسرعة.
*   عرض المنتجات في شكل شبكة (grid) أو قائمة (list).
*   إمكانية البحث عن المنتجات وتصفيتها حسب الفئة.
*   دعم مسح الباركود لإضافة المنتجات إلى السلة.
*   إدارة سلة التسوق: إضافة/حذف المنتجات، تعديل الكميات.
*   دعم التسعير بالقطعة وبالكرتون (Box Pricing).
*   إدارة جلسات بيع متعددة (tabs) في نفس الوقت.
*   اختيار العميل للبيع الآجل أو النقدي.
*   تطبيق خصومات على الفاتورة.
*   تسجيل المبلغ المدفوع وحساب المبلغ المتبقي.
*   إصدار وطباعة الفواتير.
*   اختصارات لوحة المفاتيح لتسريع العمليات (F1 للبحث، F2 للباركود، F10 لإتمام البيع، إلخ).

**ب. إدارة المنتجات (`/products`)**
*   إضافة، تعديل، وحذف المنتجات.
*   تفاصيل المنتج تشمل: الاسم، الفئة، سعر الشراء، سعر البيع، المخزون الحالي، الحد الأدنى للمخزون (للتنبيهات)، أكواد الباركود، والأسعار الخاصة بالكرتون.
*   عرض سجل مبيعات كل منتج على حدة مع رسم بياني.

**ج. إدارة العملاء (`/customers`)**
*   إضافة، تعديل، وحذف العملاء.
*   تتبع إجمالي المبيعات والرصيد (الديون) لكل عميل.
*   عرض سجل المعاملات المفصل لكل عميل (فواتير ومدفوعات).
*   تسجيل الدفعات لتسوية ديون العملاء.

**د. إدارة الموردين (`/suppliers`)**
*   إضافة، تعديل، وحذف الموردين.
*   ربط الموردين بفئات منتجات معينة.
*   تتبع أرصدة الموردين (المبالغ المستحقة لهم).
*   تسجيل فواتير الشراء وتحديث مخزون المنتجات وأسعار الشراء تلقائيًا.
*   خيارات متعددة لتحديث أسعار المنتجات عند استلام فاتورة جديدة (تحديث السعر الرئيسي أو حساب المتوسط المرجح).
*   تسجيل الدفعات للموردين.
*   إنشاء قوائم إعادة التخزين للمنتجات التي وصلت للحد الأدنى للمخزون.

**هـ. طلبات المخبز (`/bakery-orders`)**
*   وحدة متخصصة لإدارة الطلبات اليومية المتكررة (مثل الخبز).
*   إمكانية تثبيت طلب ليتكرر يوميًا.
*   تتبع حالة الطلب (مدفوع/غير مدفوع، تم الاستلام/لم يتم الاستلام).

**و. إدارة المصروفات (`/expenses`)**
*   تسجيل وتصنيف المصروفات التجارية (مثل فواتير الكهرباء، الإيجار).

**ز. التقارير (`/reports`)**
*   لوحة تحكم تفاعلية مع بطاقات للمقاييس الرئيسية (إجمالي المبيعات، الأرباح، المصروفات).
*   رسوم بيانية توضح:
    *   المبيعات عبر الزمن.
    *   المنتجات الأكثر مبيعًا.
    *   المبيعات حسب الفئة.
    *   العملاء الأكثر شراءً.
    *   الأرباح حسب كل منتج.
*   إمكانية تصفية التقارير حسب نطاق زمني.

**ح. التنبيهات (`/alerts`)**
*   عرض قائمة بالمنتجات التي وصل مخزونها إلى الحد الأدنى أو أقل.
*   عرض قائمة بالعملاء الذين لديهم فواتير مستحقة الدفع.

**ط. الإعدادات (`/settings`)**
*   تكوين معلومات الشركة (الاسم، العنوان، الشعار).
*   تغيير العملة.
*   تغيير مظهر التطبيق (فاتح/داكن/نظام) ومجموعة الألوان.
*   إدارة البيانات: إنشاء نسخة احتياطية واستعادتها.

#### **4. إدارة البيانات (Data Management)**

*   **التخزين:** يتم تخزين جميع البيانات (المنتجات، العملاء، المبيعات، إلخ) في ملفات JSON داخل مجلد `data/` في المشروع.
*   **الأمان:** يتم تشفير محتوى هذه الملفات باستخدام مفتاح تشفير (`ENCRYPTION_KEY`) محدد في ملف `.env`. هذا يضمن عدم إمكانية قراءة البيانات مباشرة من الملفات.
*   **الوصول للبيانات:** تتم جميع عمليات القراءة والكتابة من وإلى هذه الملفات من خلال "Server Actions" فقط، مما يضمن أمان ومركزية التعامل مع البيانات.
*   **النسخ الاحتياطي:** يوفر التطبيق وظيفة لتصدير جميع البيانات بالإضافة إلى الإعدادات في ملف JSON واحد، واستيرادها مرة أخرى.

#### **5. مبادئ التصميم الأساسية**

*   **متعدد اللغات:** يدعم التطبيق اللغتين الفرنسية والعربية، مع إمكانية التبديل بينهما. يتم تحميل ملفات الترجمة المناسبة وتطبيق اتجاه النص (LTR/RTL) تلقائيًا.
*   **تصميم متجاوب (Responsive):** الواجهة مصممة للعمل بشكل جيد على الشاشات المختلفة، من الحواسيب المكتبية إلى الأجهزة اللوحية.
*   **الأداء:** تم التركيز على تحسين الأداء من خلال تقنيات مثل `useCallback` و `useMemo` لتقليل عمليات إعادة العرض غير الضرورية، واستخدام مؤشر تحميل لتحسين تجربة المستخدم أثناء التنقل.
